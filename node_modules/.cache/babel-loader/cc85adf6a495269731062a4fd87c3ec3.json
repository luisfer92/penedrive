{"ast":null,"code":"import _objectSpread from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import{useParams}from'react-router-dom';import{database}from'../../firebase';import MainHolder from'./MainHolder';import Producto from'../superAdmin/ProductoClasificable';import{useProducto}from'../../contexts/ProductoContext';import{Col,Form,Row,Button}from'react-bootstrap';import{useMesage}from'../../contexts/MessageContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AlarmaProductos=function AlarmaProductos(props){var id=props.id;var _useProducto=useProducto(),productos=_useProducto.productos;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),current=_useState2[0],setCurrent=_useState2[1];var _useMesage=useMesage(),sendMensaje=_useMesage.sendMensaje;var que=useRef();var cuanto=useRef();var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),motivoVal=_useState4[0],setMotivoVal=_useState4[1];var motivos=[\"Selecciona motivo\",\"No queda\",\"Esta en mal estado\"];useEffect(function(){productos&&setCurrent(productos.find(function(p){return p.id===id;}));},[id,productos]);var manageSend=function manageSend(){console.log(\"enviando....\");if(motivoVal>0){var _que$current,_cuanto$current;var m=motivos[motivoVal];var mStr=motivoVal==1?\"\\\"\".concat(current.nombre,\"\\\" se nos ha acabado\"):\"Cuidado \\\"\".concat(current.nombre,\"\\\" en mal estado; \").concat((_que$current=que.current)===null||_que$current===void 0?void 0:_que$current.value,\" he encontrado:\").concat((_cuanto$current=cuanto.current)===null||_cuanto$current===void 0?void 0:_cuanto$current.value);sendMensaje({topic:\"productos\",__ref:\"id\",msg:mStr,__type:\"alarm\"});}};return/*#__PURE__*/_jsxs(Row,{className:\"mx-auto bg-claro justify-content-center\",children:[/*#__PURE__*/_jsx(Col,{xs:12,sm:8,className:\"d-flex justify-content-center mb-2\",children:/*#__PURE__*/_jsx(Producto,_objectSpread(_objectSpread({},current),{},{editable:true,expand:true}))}),/*#__PURE__*/_jsxs(Form,{as:Col,xs:12,className:\"bg-oscuro text-white py-2\",children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\xBFCual es la alarma?\"}),/*#__PURE__*/_jsx(Form.Select,{onChange:function onChange(ev){return setMotivoVal(ev.target.value);},value:motivoVal,children:motivos.map(function(m,i){return/*#__PURE__*/_jsx(\"option\",{value:i,children:m});})})]}),/*#__PURE__*/_jsxs(Row,{children:[motivoVal>1&&/*#__PURE__*/_jsxs(Form.Group,{as:Col,xs:12,className:\"my-2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Cuanto\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",ref:cuanto})]}),motivoVal>1&&/*#__PURE__*/_jsxs(Form.Group,{as:Col,xs:12,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Que le pasa\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",ref:que})]}),motivoVal>0&&/*#__PURE__*/_jsx(Button,{as:Col,variant:\"warning\",className:\"mt-2\",onClick:manageSend,children:\"Enviar\"})]})]})]});};export default(function(props){var _useParams=useParams(),topic=_useParams.topic,ref=_useParams.ref;return/*#__PURE__*/_jsxs(MainHolder,{children:[/*#__PURE__*/_jsx(\"h1\",{children:topic}),topic==\"productos\"&&/*#__PURE__*/_jsx(AlarmaProductos,{id:ref})]});});","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/components/common/AlarmSender.js"],"names":["React","useEffect","useRef","useState","useParams","database","MainHolder","Producto","useProducto","Col","Form","Row","Button","useMesage","AlarmaProductos","props","id","productos","current","setCurrent","sendMensaje","que","cuanto","motivoVal","setMotivoVal","motivos","find","p","manageSend","console","log","m","mStr","nombre","value","topic","__ref","msg","__type","ev","target","map","i","ref"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { database } from '../../firebase'\nimport MainHolder from './MainHolder'\nimport Producto from '../superAdmin/ProductoClasificable'\nimport { useProducto } from '../../contexts/ProductoContext'\nimport { Col, Form, Row, Button } from 'react-bootstrap'\nimport { useMesage } from '../../contexts/MessageContext'\n\n\nconst AlarmaProductos = (props) => {\n    const { id } = props\n    const { productos } = useProducto()\n    const [current, setCurrent] = useState(null)\n    const { sendMensaje } = useMesage()\n    const que=useRef()\n    const cuanto=useRef()\n    const [motivoVal, setMotivoVal] = useState(0)\n\n    const motivos = [\"Selecciona motivo\", \"No queda\", \"Esta en mal estado\"]\n\n    useEffect(() => {\n        productos && setCurrent(productos.find(p => p.id === id))\n    }, [id, productos])\n\n    const manageSend = () => {\n        console.log(\"enviando....\")\n        if(motivoVal>0){\n            const m=motivos[motivoVal]\n            const mStr=motivoVal==1?`\"${current.nombre}\" se nos ha acabado`:`Cuidado \"${current.nombre}\" en mal estado; ${que.current?.value} he encontrado:${cuanto.current?.value}`\n            sendMensaje({topic:\"productos\",__ref:\"id\",msg:mStr,__type:\"alarm\"})\n\n        } \n    }\n\n    return (\n        <Row className=\"mx-auto bg-claro justify-content-center\">\n            <Col xs={12} sm={8} className=\"d-flex justify-content-center mb-2\">\n                <Producto {...current} editable={true} expand={true} />\n            </Col>\n            <Form as={Col} xs={12} className=\"bg-oscuro text-white py-2\">\n                <Form.Group className=\"mb-2\">\n                    <Form.Label>\n                        Â¿Cual es la alarma?\n                    </Form.Label>\n                    <Form.Select onChange={(ev) => setMotivoVal(ev.target.value)} value={motivoVal}>\n                        {motivos.map((m, i) => <option value={i}>{m}</option>)}\n                    </Form.Select>\n                </Form.Group>\n                <Row>\n                    {motivoVal > 1 && <Form.Group as={Col} xs={12} className=\"my-2\" >\n                        <Form.Label>Cuanto</Form.Label>\n                        <Form.Control type=\"number\" ref={cuanto}/>\n                    </Form.Group>}\n                    {motivoVal > 1 && <Form.Group as={Col} xs={12}>\n                        <Form.Label >Que le pasa</Form.Label>\n                        <Form.Control as=\"textarea\" ref={que}/>\n                    </Form.Group>}\n                    \n                    {motivoVal > 0 && \n                        <Button as={Col} variant=\"warning\" className=\"mt-2\" onClick={manageSend}>\n                            Enviar\n                        </Button>\n                    }\n\n                </Row>\n\n            </Form>\n        </Row>\n\n    )\n}\n\n\nexport default (props) => {\n\n    const { topic, ref } = useParams()\n\n    return (\n        <MainHolder>\n            <h1>{topic}</h1>\n            {topic == \"productos\" && <AlarmaProductos id={ref} />}\n        </MainHolder>\n    )\n}"]},"metadata":{},"sourceType":"module"}