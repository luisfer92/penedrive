{"ast":null,"code":"import _objectSpread from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import firebase,{database,storage}from'../firebase';import{useAuth}from'./AuthContext';import{useLocal}from'./LocalContext';import{jsx as _jsx}from\"react/jsx-runtime\";function importAll(r){var images={};r.keys().forEach(function(item,index){images[item.replace('./','').replace('.webp','')]=r(item);});return images;}var images=importAll(require.context('../assets/maquinaria/',false,/\\.(png|jpe?g|svg|webp)$/));var maquinasStandar=[{nombre:\"cafetera\",pic:images.cafetera.default},{nombre:\"camara\",pic:images.camara.default},{nombre:\"expositor\",pic:images.expositor.default},{nombre:\"exprimidora\",pic:images.exprimidora.default},{nombre:\"freidora\",pic:images.freidora.default},{nombre:\"grifo cerveza\",pic:images.grifo.default},{nombre:\"heladera\",pic:images.heladera.default},{nombre:\"maquina hielo\",pic:images.hielo.default},{nombre:\"horno\",pic:images.horno.default},{nombre:\"impresora red\",pic:images.impresora.default},{nombre:\"pantalla pedidos\",pic:images.kds.default},{nombre:\"lavavajillas\",pic:images.lavavajillas.default},{nombre:\"baño maria\",pic:images.maria.default},{nombre:\"mesa fria\",pic:images.mesa.default},{nombre:\"microondas\",pic:images.microondas.default},{nombre:\"tpv\",pic:images.tpv.default}];export var MaquinariaContext=/*#__PURE__*/React.createContext();export function useMaquinaria(){return React.useContext(MaquinariaContext);}export function MaquinariaProvider(_ref){var children=_ref.children;var _useLocal=useLocal(),local=_useLocal.local;var _useState=useState(),_useState2=_slicedToArray(_useState,2),maquinas=_useState2[0],setMaquinas=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),selfDB=_useState4[0],setDB=_useState4[1];console.log(local);useEffect(function(){if(local){var db=database.collection(\"locales\").doc(local.id).collection(\"maquinaria\");setDB(db);}},[local]);useEffect(function(){var unsubscribe=null;if(selfDB){var maquinaria=[];console.log(\"carga inicial\");selfDB.orderBy(\"nombre\").onSnapshot(function(snap){snap.forEach(function(m){var _maquinasStandar$find;var _data=m.data();console.log(\"cambio detectado\");var data=Object.assign({},_data,{pic:(_maquinasStandar$find=maquinasStandar.find(function(ms){return ms.nombre==_data.nombre;}))===null||_maquinasStandar$find===void 0?void 0:_maquinasStandar$find.pic});console.log(data);maquinaria.push(_objectSpread({id:m.id},data));});setMaquinas(maquinaria);});}return unsubscribe?function(){return unsubscribe();}:null;},[selfDB,setMaquinas]);var createMaquina=function createMaquina(data){selfDB.add(data).then(function(query){console.log(\"lo subii\");});};var value={maquinas:maquinas,createMaquina:createMaquina,disponibles:maquinasStandar};return/*#__PURE__*/_jsx(MaquinariaContext.Provider,{value:value,children:children});}","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/contexts/MaquinariaContext.js"],"names":["React","useEffect","useState","firebase","database","storage","useAuth","useLocal","importAll","r","images","keys","forEach","item","index","replace","require","context","maquinasStandar","nombre","pic","cafetera","default","camara","expositor","exprimidora","freidora","grifo","heladera","hielo","horno","impresora","kds","lavavajillas","maria","mesa","microondas","tpv","MaquinariaContext","createContext","useMaquinaria","useContext","MaquinariaProvider","children","local","maquinas","setMaquinas","selfDB","setDB","console","log","db","collection","doc","id","unsubscribe","maquinaria","orderBy","onSnapshot","snap","m","_data","data","Object","assign","find","ms","push","createMaquina","add","then","query","value","disponibles"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport firebase, { database, storage } from '../firebase'\nimport { useAuth } from './AuthContext';\nimport { useLocal } from './LocalContext';\n\nfunction importAll(r) {\n    let images = {};\n    r.keys().forEach((item, index) => {\n        images[item.replace('./', '').replace('.webp', '')] = r(item);\n\n    });\n    return images\n}\nconst images = importAll(require.context('../assets/maquinaria/', false, /\\.(png|jpe?g|svg|webp)$/));\n\n\nconst maquinasStandar = [\n    { nombre: \"cafetera\", pic: images.cafetera.default },\n    { nombre: \"camara\", pic: images.camara.default },\n    { nombre: \"expositor\", pic: images.expositor.default },\n    { nombre: \"exprimidora\", pic: images.exprimidora.default },\n    { nombre: \"freidora\", pic: images.freidora.default },\n    { nombre: \"grifo cerveza\", pic: images.grifo.default },\n    { nombre: \"heladera\", pic: images.heladera.default },\n    { nombre: \"maquina hielo\", pic: images.hielo.default },\n    { nombre: \"horno\", pic: images.horno.default },\n    { nombre: \"impresora red\", pic: images.impresora.default },\n    { nombre: \"pantalla pedidos\", pic: images.kds.default },\n    { nombre: \"lavavajillas\", pic: images.lavavajillas.default },\n    { nombre: \"baño maria\", pic: images.maria.default },\n    { nombre: \"mesa fria\", pic: images.mesa.default },\n    { nombre: \"microondas\", pic: images.microondas.default },\n    { nombre: \"tpv\", pic: images.tpv.default },\n\n\n\n\n\n\n\n]\n\n\n\nexport const MaquinariaContext = React.createContext();\n\n\n\n\nexport function useMaquinaria() {\n    return React.useContext(MaquinariaContext)\n}\nexport function MaquinariaProvider({ children }) {\n    const { local } = useLocal()\n    const [maquinas, setMaquinas] = useState()\n    const [selfDB, setDB] = useState()\n\n    console.log(local)\n\n    useEffect(() => {\n\n        if(local){\n             const db = database.collection(\"locales\").doc(local.id).collection(\"maquinaria\")\n        setDB(db)\n\n        }\n       \n\n    }, [local])\n\n    useEffect(() => {\n       \n        let unsubscribe = null\n        if (selfDB) {\n            const maquinaria = []\n            console.log(\"carga inicial\")\n            selfDB.orderBy(\"nombre\").onSnapshot((snap) => {\n                snap.forEach((m) => {\n                    const _data = m.data()\n                    console.log(\"cambio detectado\")\n                    const data = Object.assign({}, _data, { pic: maquinasStandar.find(ms => ms.nombre == _data.nombre)?.pic })\n                    console.log(data)\n                    maquinaria.push({ id: m.id, ...data })\n                })\n                setMaquinas(maquinaria)\n            })\n        }\n\n        return unsubscribe ? () => unsubscribe() : null\n    }, [selfDB, setMaquinas])\n\n    const createMaquina = (data) => {\n        selfDB.add(data).then((query) => {\n            console.log(\"lo subii\")\n        })\n    }\n\n    const value = {\n        maquinas,\n        createMaquina,\n        disponibles: maquinasStandar,\n    }\n\n\n    return (\n        <MaquinariaContext.Provider value={value}>\n            {children}\n        </MaquinariaContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}