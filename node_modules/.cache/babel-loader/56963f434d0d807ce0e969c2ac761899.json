{"ast":null,"code":"import _objectSpread from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useRef,useState}from'react';import{Button,Col,Form,Row}from'react-bootstrap';import{FaEuroSign,FaMoon,FaSun,FaUsers}from'react-icons/fa';import{useAuth}from'../../contexts/AuthContext';import moment from'moment';import{HorarioEditorProvider,useHorarioEditorContext}from'../../contexts/HorarioEditorContext';import{useCompis}from'../../contexts/CompisContext';import SemanaPasada from'./SemanaPasada';import DiaBarraaHolder from'./DiaBarraaHolder';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var primerLunesDelMes=moment().year(2020).month(10).date(1).day(8);if(primerLunesDelMes.date()>7)primerLunesDelMes.day(-6);var Trabajador=function Trabajador(props){var pic_url=props.pic_url;return/*#__PURE__*/_jsx(Col,{xs:12,sm:10,lg:8,as:\"img\",src:pic_url,className:\"shadow rounded-circle  border border-2 border-white mx-auto d-block my-2\",style:{maxHeight:\"100px\",maxwidth:\"100px\"}});};var DiaHolder=function DiaHolder(props){var children=props.children;var _useHorarioEditorCont=useHorarioEditorContext(),setTramoHorario=_useHorarioEditorCont.setTramoHorario;var nombre=props.nombre,abbr=props.abbr,horas=props.horas,trabajadores=props.trabajadores,tramos=props.tramos,tr_index=props.tr_index,active=props.active;var length=trabajadores?trabajadores.length:0;var handleSelecction=function handleSelecction(){console.log(abbr);setTramoHorario(_objectSpread(_objectSpread({},tramos[tr_index]),{},{dia_abbr:abbr}));};return/*#__PURE__*/_jsx(Col,{xs:active?9:true,className:\"text-white p-0 d-flex justify-content-center align-items-start  h-100 position-relative border\",style:{overflowY:length>0?\"scroll\":\"hidden\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-2 d-block  h-100 p-0 mt-4\",onClick:handleSelecction,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-0 w-100 text-center border-bottom border-start border-white shadow fs-6  \".concat(length===0&&\"h-100\"),style:{position:\"absolute\",top:\"0\",left:\"0\"},children:[/*#__PURE__*/_jsx(\"span\",{className:\"d-block bg-oscuro text-warning\",children:\"3500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"d-block bg-info\",children:[length,\"/11\"]})]}),children]})});};var SemanaActiva=function SemanaActiva(props){var semana=props.semana,turnoAbr=props.turnoAbr;return semana===null||semana===void 0?void 0:semana.dias.map(function(d){var _d$trabajadores;return/*#__PURE__*/_jsx(DiaHolder,_objectSpread(_objectSpread({},d),{},{tr_index:turnoAbr===\"M\"?0:1,children:(_d$trabajadores=d.trabajadores)===null||_d$trabajadores===void 0?void 0:_d$trabajadores.map(function(t){return/*#__PURE__*/_jsx(Trabajador,_objectSpread({},t));})}));});};var TrabajadorTriada=function TrabajadorTriada(props){var pic_url=props.pic_url;return/*#__PURE__*/_jsxs(Row,{className:\"bg-success mx-auto p-0 border my-2\",style:{height:\"70px\"},children:[/*#__PURE__*/_jsx(Col,{xs:2,className:\"d-flex align-items-center p-0 h-100 bg-info\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-100 h-100 mx-auto my-auto d-flex\",style:{overflowX:\"hidden\"},children:/*#__PURE__*/_jsx(\"img\",{src:pic_url,className:\"mx-auto my-auto\",style:{width:\"100%\",maxWidth:\"64px\",height:\"100%\",maxHeight:\"64px\"}})})}),/*#__PURE__*/_jsx(Col,{xs:10,className:\"p-0 h-100 bg-dark\",children:/*#__PURE__*/_jsxs(Row,{className:\"bg-info mx-auto p-0 h-100 w-100\",children:[/*#__PURE__*/_jsx(Col,{xs:2,className:\"d-flex align-items-center justify-content-center h-100\",children:\"ant\"}),/*#__PURE__*/_jsx(Col,{className:\"d-flex m-0 p-0 align-items-center justify-content-center bg-white h-100\",children:/*#__PURE__*/_jsxs(Row,{className:\"p-0 w-100 bg-dark h-100 align-items-center\",children:[/*#__PURE__*/_jsx(Col,{xs:5,className:\"p-0\",children:/*#__PURE__*/_jsx(\"input\",{type:\"time\",className:\"w-100 p-0 d-flex justify-content-center\"})}),/*#__PURE__*/_jsx(Col,{xs:5,className:\"p-0\",children:/*#__PURE__*/_jsx(\"input\",{type:\"time\",className:\"w-100\"})}),/*#__PURE__*/_jsx(Col,{xs:2,className:\"d-flex m-0 align-items-center justify-content-center text-white fs-6\",children:\"7.5\"})]})}),/*#__PURE__*/_jsx(Col,{xs:2,className:\"d-flex align-items-center justify-content-center h-100\",children:\"sig\"})]})})]});};var DiaActivo=function DiaActivo(props){var _useCompis=useCompis(),compis=_useCompis.compis;return/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto h-100 w-100 p-0\",style:{overflowY:\"scroll\"},children:[compis===null||compis===void 0?void 0:compis.map(function(c){return/*#__PURE__*/_jsx(TrabajadorTriada,_objectSpread({},c));}),compis===null||compis===void 0?void 0:compis.map(function(c){return/*#__PURE__*/_jsx(TrabajadorTriada,_objectSpread({},c));}),compis===null||compis===void 0?void 0:compis.map(function(c){return/*#__PURE__*/_jsx(TrabajadorTriada,_objectSpread({},c));}),compis===null||compis===void 0?void 0:compis.map(function(c){return/*#__PURE__*/_jsx(TrabajadorTriada,_objectSpread({},c));}),compis===null||compis===void 0?void 0:compis.map(function(c){return/*#__PURE__*/_jsx(TrabajadorTriada,_objectSpread({},c));})]});};var SemanaHolder=function SemanaHolder(props){var turnoAbr=props.turnoAbr,handleTramoHorario=props.handleTramoHorario;var _useAuth=useAuth(),userAPI=_useAuth.userAPI;var _useHorarioEditorCont2=useHorarioEditorContext(),semana=_useHorarioEditorCont2.semana,tramoHorario=_useHorarioEditorCont2.tramoHorario;return/*#__PURE__*/_jsxs(Row,{className:\"mx-auto h-100\",children:[!tramoHorario&&/*#__PURE__*/_jsxs(DiaBarraaHolder,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-0 w-100 text-center border-top border-white shadow fs-6 \",style:{position:\"absolute\",top:\"0\",left:\"0\"},children:[/*#__PURE__*/_jsx(\"span\",{className:\"d-block bg-oscuro text-warning\",children:/*#__PURE__*/_jsx(FaEuroSign,{})}),/*#__PURE__*/_jsx(\"span\",{className:\"d-block bg-info\",children:/*#__PURE__*/_jsx(FaUsers,{})})]}),turnoAbr]}),tramoHorario?/*#__PURE__*/_jsx(DiaActivo,{}):/*#__PURE__*/_jsx(SemanaActiva,{semana:semana,turnoAbr:turnoAbr})]});};var BarraDias=function BarraDias(props){var _useHorarioEditorCont3=useHorarioEditorContext(),tramoHorario=_useHorarioEditorCont3.tramoHorario,setTramoHorario=_useHorarioEditorCont3.setTramoHorario;return/*#__PURE__*/_jsxs(Row,{className:\"bg-info text-white p-0 m-0\",style:{height:\"5%\"},children:[/*#__PURE__*/_jsx(DiaBarraaHolder,{active:tramoHorario?true:false,children:!tramoHorario?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FaSun,{}),\"-\",/*#__PURE__*/_jsx(FaMoon,{})]}):/*#__PURE__*/_jsx(FaUsers,{})}),!tramoHorario&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DiaBarraaHolder,{children:\"L\"}),/*#__PURE__*/_jsx(DiaBarraaHolder,{children:\"M\"}),/*#__PURE__*/_jsx(DiaBarraaHolder,{children:\"X\"}),/*#__PURE__*/_jsx(DiaBarraaHolder,{children:\"J\"}),/*#__PURE__*/_jsx(DiaBarraaHolder,{children:\"V\"}),/*#__PURE__*/_jsx(DiaBarraaHolder,{children:\"S\"}),/*#__PURE__*/_jsx(DiaBarraaHolder,{children:\"D\"})]}),tramoHorario&&/*#__PURE__*/_jsx(Col,{xs:10,className:\"h-100 bg-dark p-0 \",children:/*#__PURE__*/_jsxs(Row,{className:\"h-100 w-100 mx-auto\",children:[/*#__PURE__*/_jsx(Col,{xs:2,className:\"justify-content-center d-flex align-items-center h-100\",children:\"ant\"}),/*#__PURE__*/_jsx(DiaBarraaHolder,{children:/*#__PURE__*/_jsx(\"div\",{className:\"w-100 h-100 m-0 p-0 d-flex align-items-center justify-content-center\",onClick:function onClick(){setTramoHorario(null);},children:tramoHorario.dia_abbr.toUpperCase()})}),/*#__PURE__*/_jsx(Col,{xs:2,className:\"justify-content-center d-flex align-items-center h-100\",children:\"sig\"})]})})]});};var Horario=function Horario(props){var _useHorarioEditorCont4=useHorarioEditorContext(),tramoHorario=_useHorarioEditorCont4.tramoHorario;return/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 m-0 p-0\",style:{height:\"65%\"},children:[!tramoHorario&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-claro-oscuro h-50 p-0 mx-auto w-100\",children:/*#__PURE__*/_jsx(SemanaHolder,{turnoAbr:\"M\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-oscuro h-50\",children:/*#__PURE__*/_jsx(SemanaHolder,{turnoAbr:\"N\"})})]}),tramoHorario&&/*#__PURE__*/_jsx(SemanaHolder,{turnoAbr:tramoHorario.abbr})]});};export default(function(props){var semanaPasada=useRef();var apertura=\"09:30\";var cambioTurno=\"17:00\";var cierre=\"00:00\";var _useCompis2=useCompis(),compis=_useCompis2.compis;var t=[{i:apertura,f:cambioTurno},{i:cambioTurno,f:cierre}];return/*#__PURE__*/_jsx(HorarioEditorProvider,{i:primerLunesDelMes,t:t,children:/*#__PURE__*/_jsxs(\"div\",{className:\"vh-100 vw-100 bg-info p-0 m-0\",children:[/*#__PURE__*/_jsx(SemanaPasada,{ref:semanaPasada}),/*#__PURE__*/_jsx(BarraDias,{}),/*#__PURE__*/_jsx(Horario,{}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark w-100 mx-auto m-0 p-0 \",style:{height:\"10%\",overflowX:\"hidden\"},children:/*#__PURE__*/_jsx(Row,{className:\"h-100  m-0 py-1 mx-auto bg-warning  px-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-100 bg-info d-flex \",style:{overflowX:\"scroll\"},children:compis===null||compis===void 0?void 0:compis.map(function(c){return/*#__PURE__*/_jsx(Col,{className:\"h-100 bg-info d-flex justify-content-center align-items-center mx-2 bg-dark\",children:/*#__PURE__*/_jsx(\"img\",{src:c.pic_url,className:\"rounded-circle border border-2 border-white \",style:{height:\"100%\",width:\"auto\"}})});})})})})]})});});","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/admin/horario/HorarioCreator.js"],"names":["React","useRef","useState","Button","Col","Form","Row","FaEuroSign","FaMoon","FaSun","FaUsers","useAuth","moment","HorarioEditorProvider","useHorarioEditorContext","useCompis","SemanaPasada","DiaBarraaHolder","primerLunesDelMes","year","month","date","day","Trabajador","props","pic_url","maxHeight","maxwidth","DiaHolder","children","setTramoHorario","nombre","abbr","horas","trabajadores","tramos","tr_index","active","length","handleSelecction","console","log","dia_abbr","overflowY","position","top","left","SemanaActiva","semana","turnoAbr","dias","map","d","t","TrabajadorTriada","height","overflowX","width","maxWidth","DiaActivo","compis","c","SemanaHolder","handleTramoHorario","userAPI","tramoHorario","BarraDias","toUpperCase","Horario","semanaPasada","apertura","cambioTurno","cierre","i","f"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react'\nimport { Button, Col, Form, Row } from 'react-bootstrap'\nimport { FaEuroSign, FaMoon, FaSun, FaUsers } from 'react-icons/fa'\nimport { useAuth } from '../../contexts/AuthContext'\nimport moment from 'moment'\nimport { HorarioEditorProvider, useHorarioEditorContext } from '../../contexts/HorarioEditorContext'\nimport { useCompis } from '../../contexts/CompisContext'\nimport SemanaPasada from './SemanaPasada'\nimport DiaBarraaHolder from './DiaBarraaHolder'\n\n\nlet primerLunesDelMes = moment().year(2020).month(10).date(1).day(8);\nif (primerLunesDelMes.date() > 7)\n    primerLunesDelMes.day(-6);\n\nconst Trabajador = (props) => {\n    const { pic_url } = props\n    return (\n        <Col xs={12} sm={10} lg={8} as={\"img\"} src={pic_url} className=\"shadow rounded-circle  border border-2 border-white mx-auto d-block my-2\"\n            style={{ maxHeight: \"100px\", maxwidth: \"100px\" }} />\n    )\n}\n\nconst DiaHolder = (props) => {\n\n    const { children } = props\n    const { setTramoHorario } = useHorarioEditorContext()\n    const { nombre, abbr, horas, trabajadores, tramos, tr_index, active } = props\n\n    const length = trabajadores ? trabajadores.length : 0\n\n\n\n    const handleSelecction = () => {\n        console.log(abbr)\n        setTramoHorario({ ...tramos[tr_index], dia_abbr: abbr })\n\n    }\n\n\n\n\n    return (\n        <Col xs={active ? 9 : true}\n            className=\"text-white p-0 d-flex justify-content-center align-items-start  h-100 position-relative border\"\n            style={{ overflowY: length > 0 ? \"scroll\" : \"hidden\" }}\n\n        >\n\n            <div className=\"py-2 d-block  h-100 p-0 mt-4\" onClick={handleSelecction} >\n                <div className={`p-0 w-100 text-center border-bottom border-start border-white shadow fs-6  ${length === 0 && \"h-100\"}`} style={{ position: \"absolute\", top: \"0\", left: \"0\" }}  >\n\n                    <span className=\"d-block bg-oscuro text-warning\">3500</span>\n                    <span className=\"d-block bg-info\">{length}/11</span>\n                </div>\n\n                {children}\n            </div>\n\n        </Col>\n    )\n}\n\nconst SemanaActiva = (props) => {\n    const { semana, turnoAbr } = props\n    return (\n        semana?.dias.map(d =>\n            <DiaHolder {...d} tr_index={turnoAbr === \"M\" ? 0 : 1}>\n                {d.trabajadores?.map(t =>\n                    <Trabajador {...t} />\n                )}\n\n\n\n            </DiaHolder>\n        )\n    )\n}\n\n\nconst TrabajadorTriada = (props) => {\n    const { pic_url } = props\n    return (\n        <Row className=\"bg-success mx-auto p-0 border my-2\" style={{ height: \"70px\" }}>\n            <Col xs={2} className=\"d-flex align-items-center p-0 h-100 bg-info\">\n                <div className=\"w-100 h-100 mx-auto my-auto d-flex\" style={{ overflowX: \"hidden\" }}>\n\n                    <img src={pic_url} className=\"mx-auto my-auto\" style={{ width: \"100%\", maxWidth: \"64px\", height: \"100%\", maxHeight: \"64px\" }} />\n                </div>\n            </Col>\n            <Col xs={10} className=\"p-0 h-100 bg-dark\">\n                <Row className=\"bg-info mx-auto p-0 h-100 w-100\">\n\n                    <Col xs={2} className=\"d-flex align-items-center justify-content-center h-100\">\n                        ant\n                    </Col>\n                    <Col className=\"d-flex m-0 p-0 align-items-center justify-content-center bg-white h-100\">\n                        <Row className=\"p-0 w-100 bg-dark h-100 align-items-center\" >\n                            <Col xs={5} className=\"p-0\">\n                               \n                               <input type=\"time\" className=\"w-100 p-0 d-flex justify-content-center\"/>\n                            </Col>\n                            <Col xs={5} className=\"p-0\">\n                               \n                               <input type=\"time\" className=\"w-100\"/>\n                            </Col>\n                            <Col xs={2} className=\"d-flex m-0 align-items-center justify-content-center text-white fs-6\">\n                                7.5\n                            </Col>\n                            \n\n                        </Row>\n                    </Col>\n                    <Col xs={2} className=\"d-flex align-items-center justify-content-center h-100\">\n                        sig\n                    </Col>\n\n                </Row>\n\n\n\n            </Col>\n        </Row>\n    )\n}\n\nconst DiaActivo = (props) => {\n\n    const { compis } = useCompis()\n\n    return <div className=\"mx-auto h-100 w-100 p-0\" style={{ overflowY: \"scroll\" }}>\n\n        {compis?.map(c =>\n            <TrabajadorTriada {...c} />\n        )}\n\n{compis?.map(c =>\n            <TrabajadorTriada {...c} />\n        )}\n\n{compis?.map(c =>\n            <TrabajadorTriada {...c} />\n        )}\n\n{compis?.map(c =>\n            <TrabajadorTriada {...c} />\n        )}\n\n{compis?.map(c =>\n            <TrabajadorTriada {...c} />\n        )}\n\n    </div>\n}\n\n\n\nconst SemanaHolder = (props) => {\n\n    const { turnoAbr, handleTramoHorario } = props\n    const { userAPI } = useAuth()\n    const { semana, tramoHorario } = useHorarioEditorContext()\n\n\n\n    return (\n        <Row className=\"mx-auto h-100\">\n\n            {!tramoHorario &&\n\n                <DiaBarraaHolder>\n                    <div className={`p-0 w-100 text-center border-top border-white shadow fs-6 `} style={{ position: \"absolute\", top: \"0\", left: \"0\" }}  >\n\n                        <span className=\"d-block bg-oscuro text-warning\"><FaEuroSign /></span>\n                        <span className=\"d-block bg-info\"><FaUsers /></span>\n                    </div>\n                    {turnoAbr}\n                </DiaBarraaHolder>\n            }\n\n\n            {tramoHorario ? <DiaActivo /> : <SemanaActiva semana={semana} turnoAbr={turnoAbr} />}\n        </Row >\n    )\n\n\n}\n\n\n\nconst BarraDias = (props) => {\n\n\n    const { tramoHorario, setTramoHorario } = useHorarioEditorContext()\n\n    return (\n        <Row className=\"bg-info text-white p-0 m-0\" style={{ height: \"5%\" }}>\n            <DiaBarraaHolder active={tramoHorario ? true : false}>\n                {!tramoHorario ? <><FaSun />-<FaMoon /></> : <FaUsers />}\n            </DiaBarraaHolder>\n            {!tramoHorario && <>\n                <DiaBarraaHolder >L</DiaBarraaHolder>\n                <DiaBarraaHolder >M</DiaBarraaHolder>\n                <DiaBarraaHolder >X</DiaBarraaHolder>\n                <DiaBarraaHolder >J</DiaBarraaHolder>\n                <DiaBarraaHolder >V</DiaBarraaHolder>\n                <DiaBarraaHolder >S</DiaBarraaHolder>\n                <DiaBarraaHolder >D</DiaBarraaHolder>\n            </>\n            }\n            {\n                tramoHorario &&\n                <Col xs={10} className=\"h-100 bg-dark p-0 \">\n                    <Row className=\"h-100 w-100 mx-auto\">\n                        <Col xs={2} className=\"justify-content-center d-flex align-items-center h-100\">\n                            ant\n                        </Col>\n                        <DiaBarraaHolder >\n                            <div className=\"w-100 h-100 m-0 p-0 d-flex align-items-center justify-content-center\" onClick={() => { setTramoHorario(null) }}>\n                                {tramoHorario.dia_abbr.toUpperCase()}\n                            </div>\n                        </DiaBarraaHolder>\n                        <Col xs={2} className=\"justify-content-center d-flex align-items-center h-100\">\n                            sig\n                        </Col>\n\n                    </Row>\n\n                </Col>\n\n\n            }\n\n        </Row>\n    )\n}\n\n\nconst Horario = (props) => {\n    const { tramoHorario } = useHorarioEditorContext()\n    return (\n        <div className=\"w-100 m-0 p-0\" style={{ height: \"65%\" }}>\n            {!tramoHorario &&\n                <>\n                    <div className=\"bg-claro-oscuro h-50 p-0 mx-auto w-100\">\n                        <SemanaHolder turnoAbr=\"M\" />\n                    </div>\n                    <div className=\"bg-oscuro h-50\">\n                        <SemanaHolder turnoAbr=\"N\" />\n                    </div>\n                </>\n            }\n            {tramoHorario && <SemanaHolder turnoAbr={tramoHorario.abbr} />}\n        </div>)\n}\n\n\nexport default (props) => {\n    const semanaPasada = useRef()\n    const apertura = \"09:30\"\n    const cambioTurno = \"17:00\"\n    const cierre = \"00:00\"\n    const { compis } = useCompis()\n    const t = [{ i: apertura, f: cambioTurno }, { i: cambioTurno, f: cierre }]\n    return (\n        <HorarioEditorProvider i={primerLunesDelMes} t={t}>\n            <div className=\"vh-100 vw-100 bg-info p-0 m-0\">\n                <SemanaPasada ref={semanaPasada} />\n                <BarraDias />\n                <Horario />\n                <div className=\"bg-dark w-100 mx-auto m-0 p-0 \" style={{ height: \"10%\", overflowX: \"hidden\" }}>\n                    <Row className=\"h-100  m-0 py-1 mx-auto bg-warning  px-1\" >\n                        <div className=\"h-100 bg-info d-flex \" style={{ overflowX: \"scroll\" }} >\n                            {compis?.map(c =>\n                                <Col className=\"h-100 bg-info d-flex justify-content-center align-items-center mx-2 bg-dark\">\n                                    <img src={c.pic_url} className=\"rounded-circle border border-2 border-white \" style={{ height: \"100%\", width: \"auto\" }} />\n\n                                </Col>\n                            )}\n\n                        </div>\n\n\n                    </Row>\n\n                </div>\n            </div>\n        </HorarioEditorProvider>\n\n    )\n}"]},"metadata":{},"sourceType":"module"}