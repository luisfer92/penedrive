{"ast":null,"code":"var _jsxFileName = \"/home/luisfer/Escritorio/rerovaji-control/src/contexts/CompisContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport firebase, { database, storage } from '../firebase';\nimport { useLocal } from './LocalContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CompisContext = /*#__PURE__*/React.createContext();\nexport function useCompis() {\n  _s();\n\n  return React.useContext(CompisContext);\n}\n\n_s(useCompis, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function CompisProvider({\n  children\n}) {\n  _s2();\n\n  const {\n    local\n  } = useLocal();\n  const [compis, setCompis] = useState();\n  useEffect(() => {\n    local && console.log(\"buscando compis\" + local.allowed_users);\n    let newCompis = [];\n    local && database.collection(\"usuarios\").where('correo', 'in', local.allowed_users).get().then(query => {\n      query.forEach(c => {\n        const {\n          id\n        } = c;\n        storage.ref(`fotos_perfil/${id}.png`).getDownloadURL().then(url => {\n          const data = Object.assign({}, c.data(), {\n            pic_url: url\n          });\n          console.log(data);\n          newCompis.push({\n            id,\n            ...data\n          });\n        });\n      });\n      console.log(\"compis encontrados\");\n      console.log(newCompis);\n      setCompis(newCompis);\n    });\n  }, [setCompis, local]);\n  const value = {\n    compis\n  };\n  return /*#__PURE__*/_jsxDEV(CompisContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(CompisProvider, \"saIbqRLJ9u9pE5FFWnSO0togRbk=\", false, function () {\n  return [useLocal];\n});\n\n_c = CompisProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CompisProvider\");","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/contexts/CompisContext.js"],"names":["React","useEffect","useState","firebase","database","storage","useLocal","CompisContext","createContext","useCompis","useContext","CompisProvider","children","local","compis","setCompis","console","log","allowed_users","newCompis","collection","where","get","then","query","forEach","c","id","ref","getDownloadURL","url","data","Object","assign","pic_url","push","value"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,QAAP,IAAmBC,QAAnB,EAA6BC,OAA7B,QAA4C,aAA5C;AAGA,SAASC,QAAT,QAAyB,gBAAzB;;AAGA,OAAO,MAAMC,aAAa,gBAAGP,KAAK,CAACQ,aAAN,EAAtB;AAKP,OAAO,SAASC,SAAT,GAAqB;AAAA;;AACxB,SAAOT,KAAK,CAACU,UAAN,CAAiBH,aAAjB,CAAP;AACH;;GAFeE,S;;AAGhB,OAAO,SAASE,cAAT,CAAwB;AAAEC,EAAAA;AAAF,CAAxB,EAAsC;AAAA;;AACzC,QAAM;AAAEC,IAAAA;AAAF,MAAYP,QAAQ,EAA1B;AACA,QAAM,CAACQ,MAAD,EAASC,SAAT,IAAsBb,QAAQ,EAApC;AAKAD,EAAAA,SAAS,CAAC,MAAM;AACZY,IAAAA,KAAK,IAAIG,OAAO,CAACC,GAAR,CAAY,oBAAoBJ,KAAK,CAACK,aAAtC,CAAT;AAEA,QAAIC,SAAS,GAAG,EAAhB;AACAN,IAAAA,KAAK,IAAIT,QAAQ,CAACgB,UAAT,CAAoB,UAApB,EAAgCC,KAAhC,CAAsC,QAAtC,EAAgD,IAAhD,EAAsDR,KAAK,CAACK,aAA5D,EAA2EI,GAA3E,GAAiFC,IAAjF,CAAuFC,KAAD,IAAW;AACtGA,MAAAA,KAAK,CAACC,OAAN,CACKC,CAAD,IAAO;AAEH,cAAM;AAAEC,UAAAA;AAAF,YAASD,CAAf;AACArB,QAAAA,OAAO,CAACuB,GAAR,CAAa,gBAAeD,EAAG,MAA/B,EAAsCE,cAAtC,GAAuDN,IAAvD,CAA6DO,GAAD,IAAS;AAEjE,gBAAMC,IAAI,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBP,CAAC,CAACK,IAAF,EAAlB,EAA4B;AAAEG,YAAAA,OAAO,EAAEJ;AAAX,WAA5B,CAAb;AACAd,UAAAA,OAAO,CAACC,GAAR,CAAYc,IAAZ;AACAZ,UAAAA,SAAS,CAACgB,IAAV,CAAe;AAAER,YAAAA,EAAF;AAAM,eAAGI;AAAT,WAAf;AACH,SALD;AAQH,OAZL;AAcAf,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYE,SAAZ;AACAJ,MAAAA,SAAS,CAACI,SAAD,CAAT;AACH,KAlBQ,CAAT;AAoBH,GAxBQ,EAwBN,CAACJ,SAAD,EAAYF,KAAZ,CAxBM,CAAT;AA4BA,QAAMuB,KAAK,GAAG;AACVtB,IAAAA;AADU,GAAd;AAMA,sBACI,QAAC,aAAD,CAAe,QAAf;AAAwB,IAAA,KAAK,EAAEsB,KAA/B;AAAA,cACKxB;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH;;IA9CeD,c;UACML,Q;;;KADNK,c","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport firebase, { database, storage } from '../firebase'\n\n\nimport { useLocal } from './LocalContext'\n\n\nexport const CompisContext = React.createContext();\n\n\n\n\nexport function useCompis() {\n    return React.useContext(CompisContext)\n}\nexport function CompisProvider({ children }) {\n    const { local } = useLocal()\n    const [compis, setCompis] = useState()\n\n\n\n\n    useEffect(() => {\n        local && console.log(\"buscando compis\" + local.allowed_users)\n\n        let newCompis = []\n        local && database.collection(\"usuarios\").where('correo', 'in', local.allowed_users).get().then((query) => {\n            query.forEach(\n                (c) => {\n                    \n                    const { id } = c\n                    storage.ref(`fotos_perfil/${id}.png`).getDownloadURL().then((url) => { \n                       \n                        const data = Object.assign({}, c.data(), { pic_url: url }) \n                        console.log(data)\n                        newCompis.push({ id, ...data })\n                    })\n\n                   \n                }\n            )\n            console.log(\"compis encontrados\")\n            console.log(newCompis)\n            setCompis(newCompis)\n        })\n\n    }, [setCompis, local])\n\n\n\n    const value = {\n        compis,\n\n    }\n\n\n    return (\n        <CompisContext.Provider value={value}>\n            {children}\n        </CompisContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}