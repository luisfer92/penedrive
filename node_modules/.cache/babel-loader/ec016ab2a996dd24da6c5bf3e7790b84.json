{"ast":null,"code":"var _jsxFileName = \"/home/luisfer/Escritorio/rerovaji-control/src/components/superAdmin/OrganizadorProductos.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Container, Row, Button, Modal, Col } from 'react-bootstrap';\nimport { useProducto } from '../../contexts/ProductoContext';\nimport ProductoCategoria from '../common/productoCategoria';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function (props) {\n  const {\n    show,\n    setShow,\n    categoria\n  } = props;\n  const {\n    productos,\n    upgradeProductoBulk\n  } = useProducto();\n  const [agregados, setAgregados] = useState([]);\n  const [eliminados, setEliminados] = useState([]);\n  const [upload, setUpload] = useState(false);\n  const [huerfanos, setHuerfanos] = useState([]);\n  const [propios, setPropios] = useState([]);\n  useEffect(() => {\n    if (show && productos) {\n      console.log(\"cambiando huerfanos\");\n      const h = productos ? productos.filter(p => p.categoria_id == undefined) : [];\n      const p = productos && categoria ? productos.filter(p => p.categoria_id === categoria.id) : [];\n      setHuerfanos(h);\n      setPropios(p);\n    } else {\n      setHuerfanos([]);\n      setPropios([]);\n    }\n\n    setAgregados([]);\n    setEliminados([]);\n  }, [show, upload]);\n\n  const handleAgregar = (productoId, operation) => {\n    console.log(operation + \" a categoria \");\n    operation == \"+\" && setAgregados([...agregados, productoId]);\n    operation == \"-\" && setAgregados(agregados.filter(id => id === productoId));\n  };\n\n  const handleEliminar = (productoId, operation) => {\n    operation == \"+\" && setEliminados([...agregados, productoId]);\n    operation == \"-\" && setEliminados(agregados.filter(id => id === productoId));\n  };\n\n  const handleModificar = () => {\n    upgradeProductoBulk(agregados, {\n      categoria_id: categoria.id\n    });\n    upgradeProductoBulk(eliminados, {\n      categoria_id: firebase.firestore.FieldValue.delete()\n    }, true);\n    setUpload(true);\n  };\n\n  console.log(agregados);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    fullscreen: true,\n    onHide: () => setShow(false),\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      className: \"bg-oscuro text-white\",\n      closeVariant: \"white\",\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        className: \"text-white\",\n        children: categoria && categoria.nombre\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      className: \"bg-claro position-relative\",\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"d-flex justify-content-center pb-5\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          xs: 12,\n          md: 11,\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            className: \"d-flex justify-content-around \",\n            children: [propios.map(producto => {\n              return /*#__PURE__*/_jsxDEV(ProductoCategoria, {\n                id: producto.id,\n                producto: producto,\n                propio: true,\n                agregar: handleEliminar,\n                eliminar: handleEliminar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 37\n              }, this);\n            }), huerfanos.map(producto => {\n              return /*#__PURE__*/_jsxDEV(ProductoCategoria, {\n                id: producto.id,\n                producto: producto,\n                agregar: handleAgregar,\n                eliminar: handleAgregar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 37\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" w-100 fixed-bottom \",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          className: \"d-flex justify-content-around bg-oscuro py-2\",\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            xs: 12,\n            md: 9,\n            lg: 2,\n            xl: 3,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"success w-100 \",\n              onClick: handleModificar,\n              children: \" Guardar \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/components/superAdmin/OrganizadorProductos.js"],"names":["React","useEffect","useState","Container","Row","Button","Modal","Col","useProducto","ProductoCategoria","firebase","props","show","setShow","categoria","productos","upgradeProductoBulk","agregados","setAgregados","eliminados","setEliminados","upload","setUpload","huerfanos","setHuerfanos","propios","setPropios","console","log","h","filter","p","categoria_id","undefined","id","handleAgregar","productoId","operation","handleEliminar","handleModificar","firestore","FieldValue","delete","nombre","map","producto"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Container, Row, Button, Modal, Col } from 'react-bootstrap'\nimport { useProducto } from '../../contexts/ProductoContext'\nimport ProductoCategoria from '../common/productoCategoria';\n\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nexport default function (props) {\n    const { show, setShow, categoria } = props\n\n    const { productos, upgradeProductoBulk } = useProducto()\n\n    const [agregados, setAgregados] = useState([])\n    const [eliminados, setEliminados] = useState([])\n    const [upload, setUpload] = useState(false)\n\n\n\n\n    const [huerfanos, setHuerfanos] = useState([])\n    \n    const [propios, setPropios] = useState([])\n\n    useEffect(() => {\n        if (show && productos) {\n            console.log(\"cambiando huerfanos\")\n            const h = productos ? productos.filter((p) => p.categoria_id == undefined) : []\n            const p = (productos && categoria) ? productos.filter(p => p.categoria_id === categoria.id) : []\n            setHuerfanos(h)\n            setPropios(p)\n            \n        }else{\n            setHuerfanos([])\n            setPropios([])\n           \n        }\n        setAgregados([])\n        setEliminados([]) \n\n    }, [show, upload])\n\n\n\n    const handleAgregar = (productoId, operation) => {\n        console.log(operation + \" a categoria \")\n        \n        operation == \"+\" && setAgregados([...agregados,productoId])\n        operation == \"-\" && setAgregados(agregados.filter(id => id === productoId))\n       \n    }\n\n    const handleEliminar = (productoId, operation) => {\n        operation == \"+\" && setEliminados([...agregados, productoId])\n        operation == \"-\" && setEliminados(agregados.filter(id => id === productoId))\n    }\n\n\n    const handleModificar = () => {\n\n        upgradeProductoBulk(agregados, { categoria_id: categoria.id })\n        upgradeProductoBulk(eliminados, { categoria_id: firebase.firestore.FieldValue.delete() }, true)\n        \n        setUpload(true)\n    }\n\n    console.log(agregados)\n    return (\n        <Modal show={show} fullscreen={true} onHide={() => setShow(false)}>\n            <Modal.Header className=\"bg-oscuro text-white\" closeVariant=\"white\" closeButton>\n                <Modal.Title className=\"text-white\">{categoria && categoria.nombre}</Modal.Title>\n            </Modal.Header>\n            <Modal.Body className=\"bg-claro position-relative\">\n                <Row className=\"d-flex justify-content-center pb-5\">\n\n                    <Col xs={12} md={11}>\n                        <Row className=\"d-flex justify-content-around \">\n\n\n                            {propios.map((producto) => {\n                                return (\n                                    <ProductoCategoria id={producto.id} producto={producto} propio={true} agregar={handleEliminar} eliminar={handleEliminar} />\n                                )\n                            })}\n                            {huerfanos.map((producto) => {\n\n                                return (\n                                    <ProductoCategoria id={producto.id} producto={producto} agregar={handleAgregar} eliminar={handleAgregar} />\n                                )\n                            })}\n\n                        </Row>\n\n\n\n                    </Col>\n\n                </Row>\n                <div className=\" w-100 fixed-bottom \">\n                    <Row className=\"d-flex justify-content-around bg-oscuro py-2\">\n                        <Col xs={12} md={9} lg={2} xl={3}>\n                            <Button variant=\"success w-100 \" onClick={handleModificar}> Guardar </Button>\n                        </Col>\n                    </Row>\n\n                </div>\n\n            </Modal.Body>\n        </Modal>\n    )\n}"]},"metadata":{},"sourceType":"module"}