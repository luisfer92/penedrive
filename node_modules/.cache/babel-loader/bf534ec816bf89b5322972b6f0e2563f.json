{"ast":null,"code":"var _jsxFileName = \"/home/luisfer/Escritorio/rerovaji-control/src/components/common/AlarmSender.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { database } from '../../firebase';\nimport MainHolder from './MainHolder';\nimport Producto from '../superAdmin/ProductoClasificable';\nimport { useProducto } from '../../contexts/ProductoContext';\nimport { Col, Form, Row, Button } from 'react-bootstrap';\nimport { useMesage } from '../../contexts/MessageContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AlarmaProductos = props => {\n  _s();\n\n  const {\n    id\n  } = props;\n  const {\n    productos\n  } = useProducto();\n  const [current, setCurrent] = useState(null);\n  const {\n    sendMensaje\n  } = useMesage();\n  const que = useRef();\n  const cuanto = useRef();\n  const [motivoVal, setMotivoVal] = useState(0);\n  const motivos = [\"Selecciona motivo\", \"No queda\", \"Esta en mal estado\"];\n  useEffect(() => {\n    productos && setCurrent(productos.find(p => p.id === id));\n  }, [id, productos]);\n\n  const manageSend = () => {\n    console.log(\"enviando....\");\n\n    if (motivoVal > 0) {\n      var _que$current, _cuanto$current;\n\n      const m = motivos[motivoVal];\n      const mStr = motivoVal == 1 ? `\"${current.nombre}\" se nos ha acabado` : `Cuidado \"${current.nombre}\" en mal estado; ${(_que$current = que.current) === null || _que$current === void 0 ? void 0 : _que$current.value} he encontrado:${(_cuanto$current = cuanto.current) === null || _cuanto$current === void 0 ? void 0 : _cuanto$current.value}`;\n      sendMensaje({\n        topic: \"productos\",\n        __ref: \"id\",\n        msg: mStr,\n        __type: \"alarm\"\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Row, {\n    className: \"mx-auto bg-claro justify-content-center\",\n    children: [/*#__PURE__*/_jsxDEV(Col, {\n      xs: 12,\n      sm: 8,\n      className: \"d-flex justify-content-center mb-2\",\n      children: /*#__PURE__*/_jsxDEV(Producto, { ...current,\n        editable: true,\n        expand: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      as: Col,\n      xs: 12,\n      className: \"bg-oscuro text-white py-2\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"\\xBFCual es la alarma?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n          onChange: ev => setMotivoVal(ev.target.value),\n          value: motivoVal,\n          children: motivos.map((m, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: i,\n            children: m\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 48\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [motivoVal > 1 && /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          xs: 12,\n          className: \"my-2\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Cuanto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"number\",\n            ref: cuanto\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 39\n        }, this), motivoVal > 1 && /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          xs: 12,\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Que le pasa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            as: \"textarea\",\n            ref: que\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 39\n        }, this), motivoVal > 0 && /*#__PURE__*/_jsxDEV(Button, {\n          as: Col,\n          variant: \"warning\",\n          className: \"mt-2\",\n          onClick: manageSend,\n          children: \"Enviar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AlarmaProductos, \"D8T92Ff+811H7i7ZdLDhFl5Hl/o=\", false, function () {\n  return [useProducto, useMesage];\n});\n\n_c = AlarmaProductos;\nexport default _s2(props => {\n  _s2();\n\n  const {\n    topic,\n    ref\n  } = useParams();\n  return /*#__PURE__*/_jsxDEV(MainHolder, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: topic\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), topic == \"productos\" && /*#__PURE__*/_jsxDEV(AlarmaProductos, {\n      id: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 38\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n}, \"l10iPLGGDEXXHsWMuLQEAwby+ao=\", false, function () {\n  return [useParams];\n});\n\nvar _c;\n\n$RefreshReg$(_c, \"AlarmaProductos\");","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/components/common/AlarmSender.js"],"names":["React","useEffect","useRef","useState","useParams","database","MainHolder","Producto","useProducto","Col","Form","Row","Button","useMesage","AlarmaProductos","props","id","productos","current","setCurrent","sendMensaje","que","cuanto","motivoVal","setMotivoVal","motivos","find","p","manageSend","console","log","m","mStr","nombre","value","topic","__ref","msg","__type","ev","target","map","i","ref"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { database } from '../../firebase'\nimport MainHolder from './MainHolder'\nimport Producto from '../superAdmin/ProductoClasificable'\nimport { useProducto } from '../../contexts/ProductoContext'\nimport { Col, Form, Row, Button } from 'react-bootstrap'\nimport { useMesage } from '../../contexts/MessageContext'\n\n\nconst AlarmaProductos = (props) => {\n    const { id } = props\n    const { productos } = useProducto()\n    const [current, setCurrent] = useState(null)\n    const { sendMensaje } = useMesage()\n    const que=useRef()\n    const cuanto=useRef()\n    const [motivoVal, setMotivoVal] = useState(0)\n\n    const motivos = [\"Selecciona motivo\", \"No queda\", \"Esta en mal estado\"]\n\n    useEffect(() => {\n        productos && setCurrent(productos.find(p => p.id === id))\n    }, [id, productos])\n\n    const manageSend = () => {\n        console.log(\"enviando....\")\n        if(motivoVal>0){\n            const m=motivos[motivoVal]\n            const mStr=motivoVal==1?`\"${current.nombre}\" se nos ha acabado`:`Cuidado \"${current.nombre}\" en mal estado; ${que.current?.value} he encontrado:${cuanto.current?.value}`\n            sendMensaje({topic:\"productos\",__ref:\"id\",msg:mStr,__type:\"alarm\"})\n\n        } \n    }\n\n    return (\n        <Row className=\"mx-auto bg-claro justify-content-center\">\n            <Col xs={12} sm={8} className=\"d-flex justify-content-center mb-2\">\n                <Producto {...current} editable={true} expand={true} />\n            </Col>\n            <Form as={Col} xs={12} className=\"bg-oscuro text-white py-2\">\n                <Form.Group className=\"mb-2\">\n                    <Form.Label>\n                        ¿Cual es la alarma?\n                    </Form.Label>\n                    <Form.Select onChange={(ev) => setMotivoVal(ev.target.value)} value={motivoVal}>\n                        {motivos.map((m, i) => <option value={i}>{m}</option>)}\n                    </Form.Select>\n                </Form.Group>\n                <Row>\n                    {motivoVal > 1 && <Form.Group as={Col} xs={12} className=\"my-2\" >\n                        <Form.Label>Cuanto</Form.Label>\n                        <Form.Control type=\"number\" ref={cuanto}/>\n                    </Form.Group>}\n                    {motivoVal > 1 && <Form.Group as={Col} xs={12}>\n                        <Form.Label >Que le pasa</Form.Label>\n                        <Form.Control as=\"textarea\" ref={que}/>\n                    </Form.Group>}\n                    \n                    {motivoVal > 0 && \n                        <Button as={Col} variant=\"warning\" className=\"mt-2\" onClick={manageSend}>\n                            Enviar\n                        </Button>\n                    }\n\n                </Row>\n\n            </Form>\n        </Row>\n\n    )\n}\n\n\nexport default (props) => {\n\n    const { topic, ref } = useParams()\n\n    return (\n        <MainHolder>\n            <h1>{topic}</h1>\n            {topic == \"productos\" && <AlarmaProductos id={ref} />}\n        </MainHolder>\n    )\n}"]},"metadata":{},"sourceType":"module"}