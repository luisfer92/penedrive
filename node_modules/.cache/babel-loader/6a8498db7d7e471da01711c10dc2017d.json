{"ast":null,"code":"import _slicedToArray from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{FaPython}from'react-icons/fa';import{database}from'../firebase';import{useCompis}from'./CompisContext';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";var generaSemana=function generaSemana(i,trabajadores,tramos){var inicio=i.clone().startOf('day');var dias=[];for(var c=0;c!=7;c++){var ni=inicio.clone().add(\"days\",c);var nombre=ni.format(\"dddd\");var abbr=nombre===\"miércoles\"?'x':nombre.charAt(0);dias.push({i:ni,nombre:nombre,abbr:abbr,trabajadores:trabajadores,errores:[],horas:0,tramos:generaTramos(ni,tramos)});}return{horas:0,dias:dias,errores:[]};};var generaTramos=function generaTramos(inicio,tramos){var momentedTramos=[];if(tramos){var inicioTramoM=moment(inicio.format(\"YYYY-MM-DD\")+\" \"+tramos[0].i);var finTramoM=moment(inicio.format(\"YYYY-MM-DD\")+\" \"+tramos[0].f);var diffM=finTramoM.diff(inicioTramoM,\"minutes\");var tramoM={i:inicioTramoM,f:finTramoM,abbr:\"M\"};var inicioTramoN=moment(inicio.format(\"YYYY-MM-DD\")+\" \"+tramos[1].i);var finTramoN=moment(inicio.format(\"YYYY-MM-DD\")+\" \"+tramos[1].f);var diffN=finTramoN.diff(inicioTramoN,\"minutes\");var tramoN={i:inicioTramoN,f:finTramoN,abbr:\"N\"};momentedTramos=[tramoM,tramoN];}return momentedTramos;};export var HorarioEditorContext=/*#__PURE__*/React.createContext();export function useHorarioEditorContext(){return React.useContext(HorarioEditorContext);}export function HorarioEditorProvider(props){var children=props.children,i=props.i,t=props.t;var _useCompis=useCompis(),compis=_useCompis.compis;var _useState=useState(i),_useState2=_slicedToArray(_useState,2),incio=_useState2[0],setInicio=_useState2[1];var _useState3=useState(generaSemana(i,compis,t)),_useState4=_slicedToArray(_useState3,2),semana=_useState4[0],setSemana=_useState4[1];var _useState5=useState(generaSemana(i.clone().add(\"days\",7),compis)),_useState6=_slicedToArray(_useState5,2),semanaAnterior=_useState6[0],setSemanaAnterior=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),tramoHorario=_useState8[0],setTramoHorario=_useState8[1];useEffect(function(){//console.log(compis)\ncompis&&setInicio(generaSemana(i,compis));},[compis]);useEffect(function(){console.log(\"tramo horario \"+(tramoHorario===null||tramoHorario===void 0?void 0:tramoHorario.i.format(\"(dddd) DD-MM-YYYY HH:mm\"))+\" a \"+(tramoHorario===null||tramoHorario===void 0?void 0:tramoHorario.f.format(\"HH:mm\"))||\"vacio\");},[tramoHorario]);var value={incio:incio,semana:semana,semanaAnterior:semanaAnterior,tramoHorario:tramoHorario,setTramoHorario:setTramoHorario};return/*#__PURE__*/_jsx(HorarioEditorContext.Provider,{value:value,children:children});}","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/contexts/HorarioEditorContext.js"],"names":["React","useEffect","useState","FaPython","database","useCompis","moment","generaSemana","i","trabajadores","tramos","inicio","clone","startOf","dias","c","ni","add","nombre","format","abbr","charAt","push","errores","horas","generaTramos","momentedTramos","inicioTramoM","finTramoM","f","diffM","diff","tramoM","inicioTramoN","finTramoN","diffN","tramoN","HorarioEditorContext","createContext","useHorarioEditorContext","useContext","HorarioEditorProvider","props","children","t","compis","incio","setInicio","semana","setSemana","semanaAnterior","setSemanaAnterior","tramoHorario","setTramoHorario","console","log","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { FaPython } from 'react-icons/fa'\nimport { database } from '../firebase'\nimport { useCompis } from './CompisContext'\nimport moment from 'moment'\n\nconst generaSemana = (i, trabajadores, tramos) => {\n\n\n    const inicio = i.clone().startOf('day')\n\n    let dias = []\n    for (let c = 0; c != 7; c++) {\n        const ni = inicio.clone().add(\"days\", c)\n        const nombre= ni.format(\"dddd\")\n        const abbr=nombre===\"miércoles\"?'x':nombre.charAt(0)\n      \n        dias.push({\n            i: ni,\n            nombre,\n            abbr,\n            trabajadores,\n            errores: [],\n            horas: 0,\n            tramos: generaTramos(ni, tramos)\n        })\n    }\n    return { horas: 0, dias, errores: [] }\n}\n\nconst generaTramos = (inicio, tramos) => {\n    let momentedTramos=[]\n\n    if (tramos) {\n        const inicioTramoM = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[0].i)\n        const finTramoM = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[0].f)\n        const diffM = finTramoM.diff(inicioTramoM, \"minutes\")\n        const tramoM={i:inicioTramoM,f:finTramoM,abbr:\"M\"}\n\n        const inicioTramoN = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[1].i)\n        const finTramoN = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[1].f)\n        const diffN = finTramoN.diff(inicioTramoN, \"minutes\")\n        const tramoN={i:inicioTramoN,f:finTramoN,abbr:\"N\"}\n\n       momentedTramos=[tramoM,tramoN]\n\n    }\n\n\n\n\n    return momentedTramos\n\n}\n\n\nexport const HorarioEditorContext = React.createContext();\n\n\n\n\nexport function useHorarioEditorContext() {\n    return React.useContext(HorarioEditorContext)\n}\n\nexport function HorarioEditorProvider(props) {\n    const { children, i, t } = props\n    const { compis } = useCompis()\n    const [incio, setInicio] = useState(i)\n\n    const [semana, setSemana] = useState(generaSemana(i, compis, t))\n    const [semanaAnterior, setSemanaAnterior] = useState(generaSemana(i.clone().add(\"days\", 7), compis))\n    const [tramoHorario, setTramoHorario] = useState()\n\n    useEffect(() => {\n        //console.log(compis)\n        compis && setInicio(generaSemana(i, compis))\n    }, [compis])\n\n    useEffect(() => {\n        console.log(\"tramo horario \" + tramoHorario?.i.format(\"(dddd) DD-MM-YYYY HH:mm\")+\" a \"+tramoHorario?.f.format(\"HH:mm\") || \"vacio\")\n    }, [tramoHorario])\n\n    const value = {\n        incio,\n        semana,\n        semanaAnterior,\n        tramoHorario,\n        setTramoHorario\n\n    }\n\n\n    return (\n        <HorarioEditorContext.Provider value={value}>\n\n            {children}\n\n        </HorarioEditorContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}