{"ast":null,"code":"import _objectSpread from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{database}from'../firebase';import{useLocal}from'./LocalContext';import{jsx as _jsx}from\"react/jsx-runtime\";export var TecnicosContext=/*#__PURE__*/React.createContext();export function useTecnicos(){return React.useContext(TecnicosContext);}export function TecnicosProvider(_ref){var children=_ref.children;var _useLocal=useLocal(),local=_useLocal.local;var _useState=useState(),_useState2=_slicedToArray(_useState,2),tecnicos=_useState2[0],setTecnicos=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),selfDB=_useState4[0],setDB=_useState4[1];useEffect(function(){if(local){var db=database.collection(\"locales\").doc(local.id).collection(\"tecnicos\");setDB(db);}},[local]);useEffect(function(){var unsubscribe=null;if(selfDB){var plantilla=[];console.log(\"carga inicial trabajadores\");selfDB.orderBy(\"nombre\").onSnapshot(function(snap){snap.forEach(function(t){plantilla.push(_objectSpread({id:t.id},t.data()));});setTecnicos(plantilla);});}return unsubscribe?function(){return unsubscribe();}:null;},[selfDB,setTecnicos]);var createTecnico=function createTecnico(data){selfDB.add(data).then(function(query){console.log(\"lo subii\");});};var value={tecnicos:tecnicos,createTecnico:createTecnico};return/*#__PURE__*/_jsx(TecnicosContext.Provider,{value:value,children:children});}","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/contexts/TenicosContext.js"],"names":["React","useEffect","useState","database","useLocal","TecnicosContext","createContext","useTecnicos","useContext","TecnicosProvider","children","local","tecnicos","setTecnicos","selfDB","setDB","db","collection","doc","id","unsubscribe","plantilla","console","log","orderBy","onSnapshot","snap","forEach","t","push","data","createTecnico","add","then","query","value"],"mappings":"+TAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAAUC,QAAV,KAA0B,aAA1B,CAGA,OAASC,QAAT,KAAyB,gBAAzB,C,2CAKA,MAAO,IAAMC,CAAAA,eAAe,cAAGL,KAAK,CAACM,aAAN,EAAxB,CAKP,MAAO,SAASC,CAAAA,WAAT,EAAuB,CAC1B,MAAOP,CAAAA,KAAK,CAACQ,UAAN,CAAiBH,eAAjB,CAAP,CACH,CACD,MAAO,SAASI,CAAAA,gBAAT,MAAwC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CAC3C,cAAkBN,QAAQ,EAA1B,CAAQO,KAAR,WAAQA,KAAR,CACA,cAAgCT,QAAQ,EAAxC,wCAAOU,QAAP,eAAiBC,WAAjB,eACA,eAAwBX,QAAQ,EAAhC,yCAAOY,MAAP,eAAeC,KAAf,eAIAd,SAAS,CAAC,UAAM,CAEZ,GAAGU,KAAH,CAAS,CACJ,GAAMK,CAAAA,EAAE,CAAGb,QAAQ,CAACc,UAAT,CAAoB,SAApB,EAA+BC,GAA/B,CAAmCP,KAAK,CAACQ,EAAzC,EAA6CF,UAA7C,CAAwD,UAAxD,CAAX,CACLF,KAAK,CAACC,EAAD,CAAL,CAEC,CAGJ,CATQ,CASN,CAACL,KAAD,CATM,CAAT,CAWAV,SAAS,CAAC,UAAM,CAEZ,GAAImB,CAAAA,WAAW,CAAG,IAAlB,CACA,GAAIN,MAAJ,CAAY,CACR,GAAMO,CAAAA,SAAS,CAAG,EAAlB,CACAC,OAAO,CAACC,GAAR,CAAY,4BAAZ,EACAT,MAAM,CAACU,OAAP,CAAe,QAAf,EAAyBC,UAAzB,CAAoC,SAACC,IAAD,CAAU,CAC1CA,IAAI,CAACC,OAAL,CAAa,SAACC,CAAD,CAAO,CAEhBP,SAAS,CAACQ,IAAV,gBAAiBV,EAAE,CAAES,CAAC,CAACT,EAAvB,EAA8BS,CAAC,CAACE,IAAF,EAA9B,GACH,CAHD,EAIAjB,WAAW,CAACQ,SAAD,CAAX,CACH,CAND,EAOH,CAED,MAAOD,CAAAA,WAAW,CAAG,iBAAMA,CAAAA,WAAW,EAAjB,EAAH,CAAyB,IAA3C,CACH,CAhBQ,CAgBN,CAACN,MAAD,CAASD,WAAT,CAhBM,CAAT,CAkBA,GAAMkB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACD,IAAD,CAAU,CAC5BhB,MAAM,CAACkB,GAAP,CAAWF,IAAX,EAAiBG,IAAjB,CAAsB,SAACC,KAAD,CAAW,CAC7BZ,OAAO,CAACC,GAAR,CAAY,UAAZ,EACH,CAFD,EAGH,CAJD,CAMA,GAAMY,CAAAA,KAAK,CAAG,CACVvB,QAAQ,CAARA,QADU,CAEVmB,aAAa,CAAbA,aAFU,CAAd,CAOA,mBACI,KAAC,eAAD,CAAiB,QAAjB,EAA0B,KAAK,CAAEI,KAAjC,UAESzB,QAFT,EADJ,CAOH","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport  { database } from '../firebase'\n\n\nimport { useLocal } from './LocalContext';\n\n\n\n\nexport const TecnicosContext = React.createContext();\n\n\n\n\nexport function useTecnicos() {\n    return React.useContext(TecnicosContext)\n}\nexport function TecnicosProvider({ children }) {\n    const { local } = useLocal()\n    const [tecnicos, setTecnicos] = useState()\n    const [selfDB, setDB] = useState()\n\n  \n\n    useEffect(() => {\n\n        if(local){\n             const db = database.collection(\"locales\").doc(local.id).collection(\"tecnicos\")\n        setDB(db)\n\n        }\n       \n\n    }, [local])\n\n    useEffect(() => {\n       \n        let unsubscribe = null\n        if (selfDB) {\n            const plantilla = []\n            console.log(\"carga inicial trabajadores\")\n            selfDB.orderBy(\"nombre\").onSnapshot((snap) => {\n                snap.forEach((t) => {\n                   \n                    plantilla.push({ id: t.id, ...t.data() })\n                })\n                setTecnicos(plantilla)\n            })\n        }\n\n        return unsubscribe ? () => unsubscribe() : null\n    }, [selfDB, setTecnicos])\n\n    const createTecnico = (data) => {\n        selfDB.add(data).then((query) => {\n            console.log(\"lo subii\")\n        })\n    }\n\n    const value = {\n        tecnicos,\n        createTecnico,\n        \n    }\n\n\n    return (\n        <TecnicosContext.Provider value={value}>\n            \n                {children}\n                      \n        </TecnicosContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}