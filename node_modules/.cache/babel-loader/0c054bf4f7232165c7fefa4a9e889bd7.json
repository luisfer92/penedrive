{"ast":null,"code":"import _regeneratorRuntime from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/luisfer/Escritorio/rerovaji-control/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import{Card,Button,Form,Alert,Row,Col}from'react-bootstrap';import logo from'../../assets/logo.png';import{useAuth}from'../../contexts/AuthContext';import{Redirect}from'react-router-dom';import{useHistory}from\"react-router-dom\";import{auth}from'../../firebase';import{useProducto}from'../../contexts/ProductoContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(props){var emailRef=useRef();var passWordRef=useRef();var _useAuth=useAuth(),login=_useAuth.login,currentUser=_useAuth.currentUser,loadUserData=_useAuth.loadUserData;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loggedIn=_useState4[0],setLoggedIn=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useProducto=useProducto(),loadProductos=_useProducto.loadProductos;function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var usuario;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;setError('');setLoading(true);_context.next=6;return login(emailRef.current.value,passWordRef.current.value);case 6:usuario=_context.sent;if(usuario){setLoggedIn(true);}else{setError(\"No se puede iniciar sesion \");}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setError(\"No se puede iniciar sesion con esta cuenta\");case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return _handleSubmit.apply(this,arguments);}var prev=props.location.state&&props.location.state.prevPath;var redirection=prev?prev:\"/\";return/*#__PURE__*/_jsxs(_Fragment,{children:[currentUser&&/*#__PURE__*/_jsx(Redirect,{to:redirection}),/*#__PURE__*/_jsx(Row,{className:\"bg-oscuro text-white\",style:{display:\"flex\",height:\"100vh\",justifyContent:\"center\",alignItems:\"center\"},children:/*#__PURE__*/_jsxs(Col,{xs:11,md:5,lg:2,children:[/*#__PURE__*/_jsx(\"img\",{className:\"mx-auto d-block shadow my-5\",src:logo,style:{width:\"100px\"}}),/*#__PURE__*/_jsxs(Form,{className:\"mt-3\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-danger text-center\",children:error?error:\" \"}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-2\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"textoPrimario\",children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",ref:emailRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-2\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"textoPrimario\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",ref:passWordRef,required:true,value:\"galletita\"})]}),/*#__PURE__*/_jsx(Button,{disable:loading,className:\"w-100 mt-2 bg-success\",type:\"submit\",children:\"Iniciar sesion\"})]})]})})]});}","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/components/common/Login.js"],"names":["React","useEffect","useRef","useState","Card","Button","Form","Alert","Row","Col","logo","useAuth","Redirect","useHistory","auth","useProducto","Login","props","emailRef","passWordRef","login","currentUser","loadUserData","error","setError","loggedIn","setLoggedIn","loading","setLoading","loadProductos","handleSubmit","e","preventDefault","current","value","usuario","console","log","prev","location","state","prevPath","redirection","display","height","justifyContent","alignItems","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Card, Button, Form, Alert, Row, Col } from 'react-bootstrap'\nimport logo from '../../assets/logo.png';\nimport { useAuth } from '../../contexts/AuthContext'\nimport { Redirect } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\n\nimport { auth } from '../../firebase';\nimport { useProducto } from '../../contexts/ProductoContext'\n\nexport default function Login(props) {\n\n    const emailRef = useRef();\n    const passWordRef = useRef();\n    const { login, currentUser,loadUserData } = useAuth();\n    const [error, setError] = useState('');\n    const [loggedIn, setLoggedIn] = useState(false)\n    const [loading, setLoading] = useState(false)\n    const { loadProductos } = useProducto();\n\n\n     \n\n    async function handleSubmit(e) {\n\n        e.preventDefault();\n\n        try {\n\n            setError('')\n            setLoading(true)\n            const usuario = await login(emailRef.current.value, passWordRef.current.value)\n            \n            if (usuario) {\n               \n                setLoggedIn(true);\n                \n            } else {\n                setError(\"No se puede iniciar sesion \")\n            }\n\n\n        } catch (error) {\n            console.log(error)\n            setError(\"No se puede iniciar sesion con esta cuenta\")\n        }\n\n    }\n\n\n    \n\n    const prev=props.location.state && props.location.state.prevPath\n    const redirection=prev?prev:\"/\"\n    return (\n        <>\n            {currentUser && <Redirect to={redirection} />}\n            <Row className=\"bg-oscuro text-white\" style={{ display: \"flex\",height:\"100vh\",justifyContent: \"center\", alignItems: \"center\" }}>\n                <Col xs={11} md={5} lg={2}>\n                \n                 <img className=\"mx-auto d-block shadow my-5\" src={logo} style={{width:\"100px\"}}/>\n                    \n                    \n                    <Form  className=\"mt-3\" onSubmit={handleSubmit}>\n                    <p className=\"text-danger text-center\">{error?error:\" \"}</p>\n                        <Form.Group className=\"mb-2\">\n                            <Form.Label className=\"textoPrimario\">\n                                Email\n                        </Form.Label>\n                            <Form.Control type=\"email\" ref={emailRef} required  />\n                        </Form.Group>\n\n                        <Form.Group className=\"mb-2\">\n                            <Form.Label className=\"textoPrimario\">\n                                Contrase√±a\n                        </Form.Label>\n                            <Form.Control type=\"password\" ref={passWordRef} required value={\"galletita\"}/>\n                        </Form.Group>\n\n\n\n                        <Button disable={loading} className=\"w-100 mt-2 bg-success\" type=\"submit\">Iniciar sesion</Button>\n                       \n                    </Form>\n               \n\n                \n                </Col>\n            \n                   \n\n            </Row>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}