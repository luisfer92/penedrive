{"ast":null,"code":"var _jsxFileName = \"/home/luisfer/Escritorio/rerovaji-control/src/contexts/MaquinariaContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport firebase, { database, storage } from '../firebase';\nimport { useAuth } from './AuthContext';\nimport { useLocal } from './LocalContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction importAll(r) {\n  let images = {};\n  r.keys().forEach((item, index) => {\n    images[item.replace('./', '').replace('.webp', '')] = r(item);\n  });\n  return images;\n}\n\nconst images = importAll(require.context('../assets/maquinaria/', false, /\\.(png|jpe?g|svg|webp)$/));\nconst maquinasStandar = [{\n  nombre: \"cafetera\",\n  pic: images.cafetera.default\n}, {\n  nombre: \"camara\",\n  pic: images.camara.default\n}, {\n  nombre: \"expositor\",\n  pic: images.expositor.default\n}, {\n  nombre: \"exprimidora\",\n  pic: images.exprimidora.default\n}, {\n  nombre: \"freidora\",\n  pic: images.freidora.default\n}, {\n  nombre: \"grifo cerveza\",\n  pic: images.grifo.default\n}, {\n  nombre: \"heladera\",\n  pic: images.heladera.default\n}, {\n  nombre: \"maquina hielo\",\n  pic: images.hielo.default\n}, {\n  nombre: \"horno\",\n  pic: images.horno.default\n}, {\n  nombre: \"impresora red\",\n  pic: images.impresora.default\n}, {\n  nombre: \"pantalla pedidos\",\n  pic: images.kds.default\n}, {\n  nombre: \"lavavajillas\",\n  pic: images.lavavajillas.default\n}, {\n  nombre: \"baño maria\",\n  pic: images.maria.default\n}, {\n  nombre: \"mesa fria\",\n  pic: images.mesa.default\n}, {\n  nombre: \"microondas\",\n  pic: images.microondas.default\n}, {\n  nombre: \"tpv\",\n  pic: images.tpv.default\n}];\nexport const MaquinariaContext = /*#__PURE__*/React.createContext();\nexport function useMaquinaria() {\n  _s();\n\n  return React.useContext(MaquinariaContext);\n}\n\n_s(useMaquinaria, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function MaquinariaProvider({\n  children\n}) {\n  _s2();\n\n  const {\n    local\n  } = useLocal();\n  const [maquinas, setMaquinas] = useState();\n  const [selfDB, setDB] = useState();\n  useEffect(() => {\n    if (local) {\n      const db = database.collection(\"locales\").doc(local.id).collection(\"maquinaria\");\n      setDB(db);\n    }\n  }, [local]);\n  useEffect(() => {\n    let unsubscribe = null;\n\n    if (selfDB) {\n      const maquinaria = [];\n      selfDB.orderBy(\"nombre\").onSnapshot(snap => {\n        snap.forEach(m => {\n          var _maquinasStandar$find;\n\n          const _data = m.data();\n\n          const data = Object.assign({}, _data, {\n            pic: (_maquinasStandar$find = maquinasStandar.find(ms => ms.nombre == _data.nombre)) === null || _maquinasStandar$find === void 0 ? void 0 : _maquinasStandar$find.pic\n          });\n          maquinaria.push({\n            id: m.id,\n            ...data\n          });\n        });\n        setMaquinas(maquinaria);\n      });\n    }\n\n    return unsubscribe ? () => unsubscribe() : null;\n  }, [selfDB, setMaquinas]);\n\n  const createMaquina = data => {\n    selfDB.add(data).then(query => {\n      console.log(\"maquinaria creada\");\n    });\n  };\n\n  const value = {\n    maquinas,\n    createMaquina,\n    disponibles: maquinasStandar\n  };\n  return /*#__PURE__*/_jsxDEV(MaquinariaContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(MaquinariaProvider, \"XgEQ2Yu9zv+5BezgRqa908cwIRA=\", false, function () {\n  return [useLocal];\n});\n\n_c = MaquinariaProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"MaquinariaProvider\");","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/contexts/MaquinariaContext.js"],"names":["React","useEffect","useState","firebase","database","storage","useAuth","useLocal","importAll","r","images","keys","forEach","item","index","replace","require","context","maquinasStandar","nombre","pic","cafetera","default","camara","expositor","exprimidora","freidora","grifo","heladera","hielo","horno","impresora","kds","lavavajillas","maria","mesa","microondas","tpv","MaquinariaContext","createContext","useMaquinaria","useContext","MaquinariaProvider","children","local","maquinas","setMaquinas","selfDB","setDB","db","collection","doc","id","unsubscribe","maquinaria","orderBy","onSnapshot","snap","m","_data","data","Object","assign","find","ms","push","createMaquina","add","then","query","console","log","value","disponibles"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport firebase, { database, storage } from '../firebase'\nimport { useAuth } from './AuthContext';\nimport { useLocal } from './LocalContext';\n\nfunction importAll(r) {\n    let images = {};\n    r.keys().forEach((item, index) => {\n        images[item.replace('./', '').replace('.webp', '')] = r(item);\n\n    });\n    return images\n}\nconst images = importAll(require.context('../assets/maquinaria/', false, /\\.(png|jpe?g|svg|webp)$/));\n\n\nconst maquinasStandar = [\n    { nombre: \"cafetera\", pic: images.cafetera.default },\n    { nombre: \"camara\", pic: images.camara.default },\n    { nombre: \"expositor\", pic: images.expositor.default },\n    { nombre: \"exprimidora\", pic: images.exprimidora.default },\n    { nombre: \"freidora\", pic: images.freidora.default },\n    { nombre: \"grifo cerveza\", pic: images.grifo.default },\n    { nombre: \"heladera\", pic: images.heladera.default },\n    { nombre: \"maquina hielo\", pic: images.hielo.default },\n    { nombre: \"horno\", pic: images.horno.default },\n    { nombre: \"impresora red\", pic: images.impresora.default },\n    { nombre: \"pantalla pedidos\", pic: images.kds.default },\n    { nombre: \"lavavajillas\", pic: images.lavavajillas.default },\n    { nombre: \"baño maria\", pic: images.maria.default },\n    { nombre: \"mesa fria\", pic: images.mesa.default },\n    { nombre: \"microondas\", pic: images.microondas.default },\n    { nombre: \"tpv\", pic: images.tpv.default },\n\n\n\n\n\n\n\n]\n\n\n\nexport const MaquinariaContext = React.createContext();\n\n\n\n\nexport function useMaquinaria() {\n    return React.useContext(MaquinariaContext)\n}\nexport function MaquinariaProvider({ children }) {\n    const { local } = useLocal()\n    const [maquinas, setMaquinas] = useState()\n    const [selfDB, setDB] = useState()\n\n    \n\n    useEffect(() => {\n\n        if(local){\n             const db = database.collection(\"locales\").doc(local.id).collection(\"maquinaria\")\n        setDB(db)\n\n        }\n       \n\n    }, [local])\n\n    useEffect(() => {\n       \n        let unsubscribe = null\n        if (selfDB) {\n            const maquinaria = []\n           \n            selfDB.orderBy(\"nombre\").onSnapshot((snap) => {\n                snap.forEach((m) => {\n                    const _data = m.data()\n                    \n                    const data = Object.assign({}, _data, { pic: maquinasStandar.find(ms => ms.nombre == _data.nombre)?.pic })\n                    \n                    maquinaria.push({ id: m.id, ...data })\n                })\n                setMaquinas(maquinaria)\n            })\n        }\n\n        return unsubscribe ? () => unsubscribe() : null\n    }, [selfDB, setMaquinas])\n\n    const createMaquina = (data) => {\n        selfDB.add(data).then((query) => {\n            console.log(\"maquinaria creada\")\n        })\n    }\n\n    const value = {\n        maquinas,\n        createMaquina,\n        disponibles: maquinasStandar,\n    }\n\n\n    return (\n        <MaquinariaContext.Provider value={value}>\n            {children}\n        </MaquinariaContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}