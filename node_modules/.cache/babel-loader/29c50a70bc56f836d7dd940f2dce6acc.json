{"ast":null,"code":"var _jsxFileName = \"/home/luisfer/Escritorio/rerovaji-control/src/contexts/HorarioEditorContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { FaPython } from 'react-icons/fa';\nimport { database } from '../firebase';\nimport { useCompis } from './CompisContext';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst generaSemana = (i, trabajadores, tramos) => {\n  const inicio = i.clone().startOf('day');\n  let dias = [];\n\n  for (let c = 0; c != 7; c++) {\n    const ni = inicio.clone().add(\"days\", c);\n    const nombre = ni.format(\"dddd\");\n    const abbr = nombre === \"miércoles\" ? 'x' : nombre.charAt(0);\n    dias.push({\n      i: ni,\n      nombre,\n      abbr,\n      trabajadores,\n      errores: [],\n      horas: 0,\n      tramos: generaTramos(ni, tramos)\n    });\n  }\n\n  return {\n    horas: 0,\n    dias,\n    errores: []\n  };\n};\n\nconst generaTramos = (inicio, tramos) => {\n  let momentedTramos = [];\n\n  if (tramos) {\n    const inicioTramoM = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[0].i);\n    const finTramoM = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[0].f);\n    const tramoM = {\n      i: inicioTramoM,\n      f: finTramoM,\n      abbr: \"M\"\n    };\n    const inicioTramoN = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[1].i);\n    const finTramoN = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[1].f);\n    const tramoN = {\n      i: inicioTramoN,\n      f: finTramoN,\n      abbr: \"N\"\n    };\n    momentedTramos = [tramoM, tramoN];\n  }\n\n  return momentedTramos;\n};\n\nexport const HorarioEditorContext = /*#__PURE__*/React.createContext();\nexport function useHorarioEditorContext() {\n  _s();\n\n  return React.useContext(HorarioEditorContext);\n}\n\n_s(useHorarioEditorContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function HorarioEditorProvider(props) {\n  _s2();\n\n  const {\n    children,\n    i,\n    t\n  } = props;\n  const {\n    compis\n  } = useCompis();\n  const [incio, setInicio] = useState(i);\n  const [semana, setSemana] = useState(generaSemana(i, compis, t));\n  const [semanaAnterior, setSemanaAnterior] = useState(generaSemana(i.clone().add(\"days\", 7), compis));\n  const [tramoHorario, setTramoHorario] = useState();\n  useEffect(() => {\n    //console.log(compis)\n    compis && setInicio(generaSemana(i, compis));\n  }, [compis]);\n  useEffect(() => {\n    console.log(\"tramo horario \" + (tramoHorario === null || tramoHorario === void 0 ? void 0 : tramoHorario.i.format(\"(dddd) DD-MM-YYYY HH:mm\")) + \" a \" + (tramoHorario === null || tramoHorario === void 0 ? void 0 : tramoHorario.f.format(\"HH:mm\")) || \"vacio\");\n  }, [tramoHorario]);\n  const value = {\n    incio,\n    semana,\n    semanaAnterior,\n    tramoHorario,\n    setTramoHorario\n  };\n  return /*#__PURE__*/_jsxDEV(HorarioEditorContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(HorarioEditorProvider, \"RLOFokY7W1mP1EIvBBXTnxfpWzE=\", false, function () {\n  return [useCompis];\n});\n\n_c = HorarioEditorProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"HorarioEditorProvider\");","map":{"version":3,"sources":["/home/luisfer/Escritorio/rerovaji-control/src/contexts/HorarioEditorContext.js"],"names":["React","useEffect","useState","FaPython","database","useCompis","moment","generaSemana","i","trabajadores","tramos","inicio","clone","startOf","dias","c","ni","add","nombre","format","abbr","charAt","push","errores","horas","generaTramos","momentedTramos","inicioTramoM","finTramoM","f","tramoM","inicioTramoN","finTramoN","tramoN","HorarioEditorContext","createContext","useHorarioEditorContext","useContext","HorarioEditorProvider","props","children","t","compis","incio","setInicio","semana","setSemana","semanaAnterior","setSemanaAnterior","tramoHorario","setTramoHorario","console","log","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { FaPython } from 'react-icons/fa'\nimport { database } from '../firebase'\nimport { useCompis } from './CompisContext'\nimport moment from 'moment'\n\nconst generaSemana = (i, trabajadores, tramos) => {\n\n\n    const inicio = i.clone().startOf('day')\n\n    let dias = []\n    for (let c = 0; c != 7; c++) {\n        const ni = inicio.clone().add(\"days\", c)\n        const nombre= ni.format(\"dddd\")\n        const abbr=nombre===\"miércoles\"?'x':nombre.charAt(0)\n      \n        dias.push({\n            i: ni,\n            nombre,\n            abbr,\n            trabajadores,\n            errores: [],\n            horas: 0,\n            tramos: generaTramos(ni, tramos)\n        })\n    }\n    return { horas: 0, dias, errores: [] }\n}\n\nconst generaTramos = (inicio, tramos) => {\n    let momentedTramos=[]\n\n    if (tramos) {\n        const inicioTramoM = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[0].i)\n        const finTramoM = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[0].f)\n        const tramoM={i:inicioTramoM,f:finTramoM,abbr:\"M\"}\n\n        const inicioTramoN = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[1].i)\n        const finTramoN = moment(inicio.format(\"YYYY-MM-DD\") + \" \" + tramos[1].f)\n        const tramoN={i:inicioTramoN,f:finTramoN,abbr:\"N\"}\n\n       momentedTramos=[tramoM,tramoN]\n\n    }\n\n\n\n\n    return momentedTramos\n\n}\n\n\nexport const HorarioEditorContext = React.createContext();\n\n\n\n\nexport function useHorarioEditorContext() {\n    return React.useContext(HorarioEditorContext)\n}\n\nexport function HorarioEditorProvider(props) {\n    const { children, i, t } = props\n    const { compis } = useCompis()\n    const [incio, setInicio] = useState(i)\n\n    const [semana, setSemana] = useState(generaSemana(i, compis, t))\n    const [semanaAnterior, setSemanaAnterior] = useState(generaSemana(i.clone().add(\"days\", 7), compis))\n    const [tramoHorario, setTramoHorario] = useState()\n\n    useEffect(() => {\n        //console.log(compis)\n        compis && setInicio(generaSemana(i, compis))\n    }, [compis])\n\n    useEffect(() => {\n        console.log(\"tramo horario \" + tramoHorario?.i.format(\"(dddd) DD-MM-YYYY HH:mm\")+\" a \"+tramoHorario?.f.format(\"HH:mm\") || \"vacio\")\n    }, [tramoHorario])\n\n    const value = {\n        incio,\n        semana,\n        semanaAnterior,\n        tramoHorario,\n        setTramoHorario\n\n    }\n\n\n    return (\n        <HorarioEditorContext.Provider value={value}>\n\n            {children}\n\n        </HorarioEditorContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}